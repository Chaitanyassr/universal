/*

    The "development" configuration for the Couch Connector, which also starts a Couch instance if needed.  Note,
    you can control how Couch is started/stopped using an environment variable:

    * (nothing, the default): Start a Docker container running CouchDB.
    * `GPII_TEST_COUCH_USE_VAGRANT`: If this is set, a Vagrant VM will be created that is running Docker and CouchDB.
    * `GPII_TEST_COUCH_USE_EXTERNAL`: If this is set, an external instance of CouchDB running on port 25984 will be
      used.

    For more information, see the documentation for the gpii-couchdb-test-harness package:

    https://github.com/GPII/gpii-couchdb-test-harness

*/
{
    "type": "gpii.couchConnector.config.development",
    "options": {
        "components": {
            "harness": {
                "options": {
                    // Avoid clobbering the data each time we start up.
                    "cleanDbs": false,
                    // Start the harness on startup.
                    "listeners": {
                        "onCreate.startHarness": {
                            func: "{that}.startup"
                        }
                    }
                }
            }
        }
    },
    "mergeConfigs": [
        "%gpii-couch-connector/configs/gpii.couchConnector.config.base.json5"
    ]
}
